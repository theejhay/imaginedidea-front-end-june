<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>
<body>
    <script>
        // Promise
        // 3 States
        // Pending: I'm still working on it
        // Fulfilled: I'm done with it (Finished succcessfully)
        // Rejected: Something went wrong 


        // Lend a friend money
        // Until Next Week -> pending
        // If they pay -> fulfilled
        // if they don't -> rejected

        // USING CALLBACKS
        // function getMoneyBack(callback){
        //     setTimeout(() => {
        //         callback("Here's your money , I have it")
        //     }, 2000);
        // }

        // getMoneyBack(result => {
        //     console.log(result);
        // })

        // USING PROMISE
        // function getMoneyBack(){
        //     return new Promise((resolve) => {
        //         setTimeout(()=>{
        //             resolve("Here's your money, I have it now!");
        //         }, 2000)
        //     });
        // }

        // getMoneyBack().then(result => {
        //     console.log(result)
        // });

        // Handling Errors (Reject)
        function getMoneyBack(friendHasMoney){
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (friendHasMoney) {
                        resolve("💰 Paid back!");
                    } else {
                        reject("❌ Sorry, I'm broke!")
                    }
                }, 2000)
            });
        }

        getMoneyBack(true)
                    .then(result => {
                        console.log(result);
                    })
                    .catch(error => {
                        console.log(error);
                    });

        let promise = new Promise((resolve, reject) => {
            let success = false;

            if (success) {
                resolve("🎊 Task Completed Successfully!");
            } else {
                reject("❌ Task Failed");
            }
        });

        promise
            .then(result => console.log(result))
            .catch(error => console.log(error));

    


     // Example 3
     function loginUser(username, password){
        return new Promise((resolve, reject) => {
            if(username === "admin" && password === "1234") {
                resolve("✅ Login Successful !");
            } else {
                reject("❌ Invalid Credentials!")
            }
        });
     }

     loginUser("admin", "1234")
        .then(msg => console.log(msg))
        .catch(error => console.log(error));

         
    </script>
    
</body>
</html>